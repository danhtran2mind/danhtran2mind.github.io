---
layout: default
---
<style type="text/css">
  h1 {
    font-size: 2.2rem;
    font-weight: 600;
  }
  h2 {
    font-size: 2rem;
    font-weight: 550;
  }
  h3 {
    font-size: 1.75rem;
    font-weight: 500;
  }
  h4 {
    font-size: 1.4rem;
    font-weight: 450;
  }
  p {
    font-size: 1rem;
  }
  {% if page._styles %}
    {{ page._styles }}
  {% endif %}
</style>

<div class="post">
  {% if page.toc and page.toc.sidebar %}
    <div class="row">
      <!-- main content area -->
      <div class="col-sm-9">
        <article>
          <div class="cv">
            {{ content }}
          </div>
        </article>
        {% if page.related_publications %}
          <div class="card mt-3 p-3">
            <a class="anchor" id="references"></a>
            <h3 class="card-title font-weight-medium" style="font-weight: 500; color: var(--global-theme-color);">References</h3>
            <div class="publications">
              {% bibliography --cited_in_order %}
            </div>
          </div>
        {% endif %}
        {% if site.giscus and page.giscus_comments %}
          {% include giscus.liquid %}
        {% endif %}
      </div>
      <!-- sidebar, which will move to the top on a small screen -->
      <div class="col-sm-3">
        <nav id="toc-sidebar" class="sticky-top"></nav>
      </div>
    </div>
  {% else %}
    <article>
      <div class="cv">
        {{ content }}
      </div>
    </article>
    {% if page.related_publications %}
      <div class="card mt-3 p-3">
        <a class="anchor" id="references"></a>
        <h3 class="card-title font-weight-medium" style="font-weight: 500; color: var(--global-theme-color);">References</h3>
        <div class="publications">
          {% bibliography --cited_in_order %}
        </div>
      </div>
    {% endif %}
    {% if site.giscus and page.giscus_comments %}
      {% include giscus.liquid %}
    {% endif %}
  {% endif %}
</div>

<script>
// Function to generate TOC and wrap content in cards
document.addEventListener('DOMContentLoaded', function() {
  const contentDiv = document.querySelector('.cv');
  const tocSidebar = document.getElementById('toc-sidebar');
  if (!contentDiv) return;

  const headings = contentDiv.querySelectorAll('h1, h2, h3, h4, h5, h6');
  let toc = [];
  let currentCard = '';
  let resultHtml = '';
  let lastHeading = null;

  headings.forEach(heading => {
    const id = heading.textContent.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/(^-|-$)/g, '');
    heading.id = id;
    toc.push({
      level: parseInt(heading.tagName.replace('H', '')),
      title: heading.textContent,
      id: id
    });

    if (lastHeading) {
      resultHtml += `<div class="card mt-3 p-3">${currentCard}</div>`;
      currentCard = '';
    }

    currentCard += `<a class="anchor" id="${id}"></a><h3 class="card-title font-weight-medium" style="font-weight: 500; color: var(--global-theme-color);">${heading.textContent}</h3><div>`;
    lastHeading = heading;

    let nextElement = heading.nextElementSibling;
    while (nextElement && !nextElement.matches('h1, h2, h3, h4, h5, h6')) {
      currentCard += nextElement.outerHTML;
      nextElement = nextElement.nextElementSibling;
    }
  });

  if (currentCard) {
    resultHtml += `<div class="card mt-3 p-3">${currentCard}</div>`;
  }

  contentDiv.innerHTML = resultHtml;

  // Render TOC if sidebar exists
  if (tocSidebar && toc.length > 0) {
    let tocHtml = '<ul>';
    toc.forEach(item => {
      tocHtml += `<li style="margin-left: ${(item.level - 1) * 1.5}rem;"><a href="#${item.id}">${item.title}</a></li>`;
    });
    tocHtml += '</ul>';
    tocSidebar.innerHTML = tocHtml;
  }
});
</script>